## Environment variables

This guide explains all the available configurations in your `.env` file so that you can configure your environments accordingly. For more details, you can also check official documentation from Cube.js on [Environment Variables](https://cube.dev/docs/reference/environment-variables).

### Generic
#### `CUBEJS_DEV_MODE`
Debug mode on or off. Possible values are `true` and `false`. Do not set to true on production environments. The CubeJS Developer Playground is only available when it is set to `true`.

#### `CUBEJS_API_SECRET`
Used by CubeJS. It should be a secret value and shouldn't be added to git.
You can create a 32-digit secret key from this website: https://generate.plus/en/base64

#### `CUBEJS_SCHEDULED_REFRESH_TIMER`
If true, it enables scheduled refreshes. Can also be set to a number representing how many seconds to wait before triggering another refresh. Recommended value is true for production deployments. Defaults to false.

#### `PLIO_ORGANIZATIONS_SCHEMAS`
##### Postgres
If you're using Postgres as your Cube.js database, these are the schema names within the database. Run the following query in your postgresql to retrieve the list of organization schemas:
```sql
SELECT string_agg(schema_name, ',') FROM public.organization;
```

##### BigQuery
If you're using BigQuery as your Cube.js database, these are the datasets within your BigQuery project for each organization. Use a comma-separated list of all the dataset names.

### Database settings (for BigQuery)
Plio uses BigQuery for the Analytics data warehouse. Configure the following env variables to connect your Cube.js instance to your BigQuery instance.

#### `CUBEJS_DB_TYPE`
Database engine for Plio. It should be `bigquery`.

#### `CUBEJS_DB_BQ_PROJECT_ID`
The project id for your bigquery project. Generally, it's the name of your project.

#### `CUBEJS_DB_BQ_CREDENTIALS`
This is a base64 encoded value of your Google Cloud Platform's service account. You can learn more about acquiring service account credentials [here](https://cloud.google.com/docs/authentication/getting-started) and [here](https://console.cloud.google.com/projectselector2/iam-admin/serviceaccounts?supportedpurview=project). The service account must have BigQuery admin permissions.

Once you have downloaded the JSON file, run the following commands and use the output for this environment variable:
```sh
cat /path/to/gcp-service-account-filename.json | base64
```

#### `CUBEJS_DB_BQ_LOCATION`
The region of your bigquery setup in Google Cloud Console. You can check this from the dataset info section from BigQuery dashboard. You can find all supported regions [here](https://cloud.google.com/bigquery/docs/locations#regional-locations).


### Local development server
#### `PORT`
Port on which you want the Cube.js API to be exposed.

#### `APP_DASHBOARD_PORT`
Port on which you want the Cube.js Dashboard App to be created using the Developer Playground.

### Redis
#### `CUBEJS_REDIS_URL`
Hostname of your Redis instance.

#### `CUBEJS_REDIS_PASSWORD`
Password of your Redis instance.

#### `CUBEJS_REDIS_TLS`
A boolean value to set TLS authentication between the app and Redis server. Defaults to `false` if not provided.

### Authentication
Before setting these variables, make sure you have gone through the [Authentication](./AUTHENTICATION.md) guide.

#### `CUBEJS_JWK_URL`
This is the url to fetch the JSON web keys details. Generally looks like `https://<AUTH0-SUBDOMAIN>.us.auth0.com/.well-known/jwks.json`. Replace the `<AUTH0-SUBDOMAIN>` by the domain name for your account. The domain can be determined from `Your app > Settings > Domain`.

#### `CUBEJS_JWT_AUDIENCE`
This is the unique identifier that was set when configuring the API in Auth0. Should be the url for your app.

#### `CUBEJS_JWT_ISSUER`
JWT issuer should be the domain for your Auth0 app. Generally looks like `https://<AUTH0-SUBDOMAIN>.us.auth0.com/`. Replace the `<AUTH0-SUBDOMAIN>` by the domain name for your account. The domain can be determined from `Your app > Settings > Domain`.

#### `CUBEJS_JWT_ALGS`
This should be set to RS256 to decode the access token generated by same algorithm.

#### `CUBEJS_JWT_CLAIMS_NAMESPACE`
The claim namespace should be your app url. In this case, it would be same as the `CUBEJS_JWT_AUDIENCE` variable. When running it locally with `CUBEJS_DEV_MODE=true`, this should be set to `http://localhost:PORT/`.


### Database settings (for Postgres)
Postgres for Plio analytics is only recommended during development. If you're setting up Plio on production, we highly recommend to use BigQuery (instructions above).

#### `CUBEJS_DB_TYPE`
Database engine for Plio. It should be `postgres` as added in `.env.example`. However, if you wish to add your own implementation, feel free to change it.

#### `CUBEJS_DB_HOST`
The database host.
1. If you're using Docker locally for your database, use `host.docker.internal`.
2. If you're using a remote database, set it accordingly.

#### `CUBEJS_DB_NAME`
The name of the database.

#### `CUBEJS_DB_PORT`
The port for the database.

#### `CUBEJS_DB_USER`
The database user.

#### `CUBEJS_DB_PASS`
The password for the database user.
